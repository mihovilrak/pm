npm warn cli npm v11.2.0 does not support Node.js v22.7.0. This version of npm supports the following node versions: `^20.17.0 || >=22.9.0`. You can find the latest version at https://nodejs.org/.
npm warn Unknown cli config "--testPathPattern". This will stop working in the next major version of npm.
npm warn Unknown cli config "--coverage". This will stop working in the next major version of npm.

> project-management-backend@1.0.0 test
> jest --config src/__tests__/jest.config.ts

  console.error
    Error fetching activity types: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\activityTypeController.test.ts:96:77)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      18 |     res.status(200).json(activityTypes);
      19 |   } catch (error) {
    > 20 |     console.error('Error fetching activity types:', error);
         |             ^
      21 |     res.status(500).json({ error: 'Failed to fetch activity types' });
      22 |   }
      23 | };

      at Object.error [as getActivityTypes] (controllers/activityTypeController.ts:20:13)
      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:97:9)

  console.error
    Error: DB error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\profileController.test.ts:123:64)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      23 |     res.status(200).json(profile);
      24 |   } catch (error) {
    > 25 |     console.error(error);
         |             ^
      26 |     res.status(500).json({
      27 |       error: 'Internal server error'
      28 |     });

      at error (controllers/profileController.ts:25:13)
      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:125:7)

  console.error
    Error deleting activity type: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\activityTypeController.test.ts:244:77)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      111 |     res.status(200).json({ message: 'Activity type deleted successfully' });
      112 |   } catch (error) {
    > 113 |     console.error('Error deleting activity type:', error);
          |             ^
      114 |     res.status(500).json({ error: 'Failed to delete activity type' });
      115 |   }
      116 | };

      at Object.error [as deleteActivityType] (controllers/activityTypeController.ts:113:13)
      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:246:7)

  console.error
    Error: DB error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\profileController.test.ts:297:71)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      145 |     res.status(200).json(projects);
      146 |   } catch (error) {
    > 147 |     console.error(error);
          |             ^
      148 |     res.status(500).json({
      149 |       error: 'Internal server error'
      150 |     });

      at error (controllers/profileController.ts:147:13)
      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:299:7)

FAIL src/controllers/__tests__/activityTypeController.test.ts (8.867 s)
  ActivityTypeController
    getActivityTypes
      ΓêÜ should return activity types (35 ms)
      ├ù should handle errors appropriately (221 ms)
    createActivityType
      ├ù should create an activity type (2 ms)
      ├ù should return 400 if the user is not authenticated (6 ms)
      ΓêÜ should return 400 when color is not a valid hex color (12 ms)
    updateActivityType
      ├ù should update an activity type successfully (4 ms)
      ΓêÜ shoul return 404 when activity type is not found (1 ms)
    deleteActivityType
      ├ù should delete an activity type successfully (4 ms)
      ├ù should handle errors appropriately (7 ms)
    getAvailableIcons
      ├ù should return a list of available icons (1 ms)
      ├ù should handle errors appropriately (1 ms)

  ΓùÅ ActivityTypeController ΓÇ║ getActivityTypes ΓÇ║ should handle errors appropriately

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "error": "Internal server error",
    +   "error": "Failed to fetch activity types",
      },

    Number of calls: 1

      102 |       expect(activityTypeModel.getActivityTypes).toHaveBeenCalledWith(mockPool);
      103 |       expect(mockRes.status).toHaveBeenCalledWith(500);
    > 104 |       expect(mockRes.json).toHaveBeenCalledWith({ error: 'Internal server error' });
          |                            ^
      105 |     });
      106 |   });
      107 |

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:104:28)

  ΓùÅ ActivityTypeController ΓÇ║ createActivityType ΓÇ║ should create an activity type

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      129 |         );
      130 |
    > 131 |       expect(activityTypeModel.createActivityType).toHaveBeenCalled();
          |                                                    ^
      132 |       expect(activityTypeModel.createActivityType).toHaveBeenCalledWith(mockPool, mockActivityTypeData);
      133 |       expect(mockRes.status).toHaveBeenCalledWith(201);
      134 |       expect(mockRes.json).toHaveBeenCalledWith(createdActivityType);

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:131:52)

  ΓùÅ ActivityTypeController ΓÇ║ createActivityType ΓÇ║ should return 400 if the user is not authenticated

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 400
    Received: 401

    Number of calls: 1

      146 |       );
      147 |
    > 148 |       expect(mockRes.status).toHaveBeenCalledWith(400);
          |                              ^
      149 |       expect(mockRes.json).toHaveBeenCalledWith(
      150 |         expect.objectContaining({
      151 |           error: 'User not authenticated'

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:148:30)

  ΓùÅ ActivityTypeController ΓÇ║ updateActivityType ΓÇ║ should update an activity type successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {},
      "1",
    - {"name": "Updated Activity Type"},
    + "Updated Activity Type",
    + "",
    + "",
    + "",

    Number of calls: 1

      202 |       );
      203 |
    > 204 |       expect(activityTypeModel.updateActivityType).toHaveBeenCalledWith(mockPool, activityTypeId, mockUpdateData);
          |                                                    ^
      205 |       expect(mockRes.status).toHaveBeenCalledWith(200);
      206 |       expect(mockRes.json).toHaveBeenCalledWith(updatedActivityType);
      207 |     });

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:204:52)

  ΓùÅ ActivityTypeController ΓÇ║ deleteActivityType ΓÇ║ should delete an activity type successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "success": true,
    +   "message": "Activity type deleted successfully",
      },

    Number of calls: 1

      237 |       expect(activityTypeModel.deleteActivityType).toHaveBeenCalledWith(mockPool, activityTypeId);
      238 |       expect(mockRes.status).toHaveBeenCalledWith(200);
    > 239 |       expect(mockRes.json).toHaveBeenCalledWith({ success: true });
          |                            ^
      240 |     });
      241 |
      242 |     it('should handle errors appropriately', async () => {

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:239:28)

  ΓùÅ ActivityTypeController ΓÇ║ deleteActivityType ΓÇ║ should handle errors appropriately

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "error": "Internal server error",
    +   "error": "Failed to delete activity type",
      },

    Number of calls: 1

      251 |
      252 |       expect(mockRes.status).toHaveBeenCalledWith(500);
    > 253 |       expect(mockRes.json).toHaveBeenCalledWith({ error: 'Internal server error' });
          |                            ^
      254 |     });
      255 |   });
      256 |

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:253:28)

  ΓùÅ ActivityTypeController ΓÇ║ getAvailableIcons ΓÇ║ should return a list of available icons

    TypeError: activityTypeController.getAvailableIcons.mockResolvedValue is not a function

      262 |         'cloud', 'support', 'more_horiz'
      263 |     ];
    > 264 |       (activityTypeController.getAvailableIcons as jest.Mock).mockResolvedValue(mockIcons);
          |                                                               ^
      265 |
      266 |       await activityTypeController.getAvailableIcons(
      267 |         mockReq as Request,

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:264:63)

  ΓùÅ ActivityTypeController ΓÇ║ getAvailableIcons ΓÇ║ should handle errors appropriately

    TypeError: activityTypeController.getAvailableIcons.mockRejectedValue is not a function

      274 |
      275 |     it('should handle errors appropriately', async () => {
    > 276 |       (activityTypeController.getAvailableIcons as jest.Mock).mockRejectedValue(new Error('Failed to fetch icons error'));
          |                                                               ^
      277 |
      278 |       await activityTypeController.getAvailableIcons(
      279 |         mockReq as Request,

      at Object.<anonymous> (controllers/__tests__/activityTypeController.test.ts:276:63)

FAIL src/controllers/__tests__/profileController.test.ts (8.907 s)
  Profile Controller
    getProfile
      ΓêÜ should return profile data when authenticated (37 ms)
      ΓêÜ should return 401 when unauthenticated (3 ms)
      ΓêÜ should handle internal server errors (202 ms)
      ├ù should handle case when profile is not found (6 ms)
    updateProfile
      ΓêÜ should update profile with valid data (3 ms)
      ΓêÜ should handle partial updates (1 ms)
      ΓêÜ should return 401 when unauthenticated (1 ms)
      ├ù should handle case when profile update fails (1 ms)
    getRecentTasks
      ΓêÜ should fetch recent tasks (2 ms)
      ΓêÜ should handle empty task list (1 ms)
    getRecentProjects
      ΓêÜ should fetch recent projects (2 ms)
      ΓêÜ should handle database errors (5 ms)
    changePassword
      ├ù should update password with valid input (3 ms)
      ├ù should return 400 with invalid passwords (11 ms)
      ├ù should handle incorrect old password (1 ms)

  ΓùÅ Profile Controller ΓÇ║ getProfile ΓÇ║ should handle case when profile is not found

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\notificationController.test.ts:119:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      14 |     res.status(200).json(notifications);
      15 |   } catch (error) {
    > 16 |     console.error(error);
         |             ^
      17 |     res.status(500).json({ error: 'Internal server error' });
      18 |   }
      19 | };

      at error (controllers/notificationController.ts:16:13)
      at Object.<anonymous> (controllers/__tests__/notificationController.test.ts:122:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\notificationController.test.ts:158:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      30 |     res.status(200).json(updatedNotifications);
      31 |   } catch (error) {
    > 32 |     console.error(error);
         |             ^
      33 |     res.status(500).json({ error: 'Internal server error' });
      34 |   }
      35 | };

      at error (controllers/notificationController.ts:32:13)
      at Object.<anonymous> (controllers/__tests__/notificationController.test.ts:161:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\notificationController.test.ts:182:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      46 |     res.status(200).json({ message: 'Notification deleted' });
      47 |   } catch (error) {
    > 48 |     console.error(error);
         |             ^
      49 |     res.status(500).json({ error: 'Internal server error' });
      50 |   }
      51 | };

      at error (controllers/notificationController.ts:48:13)
      at Object.<anonymous> (controllers/__tests__/notificationController.test.ts:185:7)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 404
    Received: 200

    Number of calls: 1

      135 |
      136 |       expect(getProfileSpy).toHaveBeenCalledWith(mockPool, '1');
    > 137 |       expect(mockStatus).toHaveBeenCalledWith(404);
          |                          ^
      138 |       expect(mockJson).toHaveBeenCalledWith({ error: 'Profile not found' });
      139 |     });
      140 |   });

      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:137:26)

  ΓùÅ Profile Controller ΓÇ║ updateProfile ΓÇ║ should handle case when profile update fails

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 404
    Received: 200

    Number of calls: 1

      226 |         expect.objectContaining({ name: 'New Name' })
      227 |       );
    > 228 |       expect(mockStatus).toHaveBeenCalledWith(404);
          |                          ^
      229 |       expect(mockJson).toHaveBeenCalledWith({ error: 'Profile not found' });
      230 |     });
      231 |   });

      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:228:26)

  ΓùÅ Profile Controller ΓÇ║ changePassword ΓÇ║ should update password with valid input

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}, "1", "oldPass123", "newPass123"

    Number of calls: 0

      314 |       await changePassword(mockRequest as Request, mockResponse, mockPool);
      315 |
    > 316 |       expect(profileModel.changePassword).toHaveBeenCalledWith(
          |                                           ^
      317 |         mockPool,
      318 |         '1',
      319 |         'oldPass123',

      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:316:43)

  ΓùÅ Profile Controller ΓÇ║ changePassword ΓÇ║ should return 400 with invalid passwords

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "error": "Invalid password format",
    +   "error": "Current password is incorrect",
      },

    Number of calls: 1

      329 |
      330 |       expect(mockStatus).toHaveBeenCalledWith(400);
    > 331 |       expect(mockJson).toHaveBeenCalledWith({ error: 'Invalid password format' });
          |                        ^
      332 |     });
      333 |
      334 |     it('should handle incorrect old password', async () => {

      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:331:24)

  ΓùÅ Profile Controller ΓÇ║ changePassword ΓÇ║ should handle incorrect old password

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 401
    Received: 400

    Number of calls: 1

      341 |       await changePassword(mockRequest as Request, mockResponse, mockPool);
      342 |
    > 343 |       expect(mockStatus).toHaveBeenCalledWith(401);
          |                          ^
      344 |       expect(mockJson).toHaveBeenCalledWith({ error: 'Invalid old password' });
      345 |     });
      346 |   });

      at Object.<anonymous> (controllers/__tests__/profileController.test.ts:343:26)

PASS src/controllers/__tests__/notificationController.test.ts (8.987 s)
  Notification Controller
    getUserNotifications
      ΓêÜ should get user notifications successfully (39 ms)
      ΓêÜ should handle errors when getting notifications (211 ms)
    markAsRead
      ΓêÜ should mark notifications as read successfully (5 ms)
      ΓêÜ should handle errors when marking notifications as read (27 ms)
    deleteNotification
      ΓêÜ should delete notification successfully (3 ms)
      ΓêÜ should handle errors when deleting notification (7 ms)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\adminController.test.ts:106:63)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      27 |     return true;
      28 |   } catch (error) {
    > 29 |     console.error(error);
         |             ^
      30 |     res.status(500).json({ error: 'Internal server error' });
      31 |     return false;
      32 |   }

      at Object.error [as checkAdminAccess] (controllers/adminController.ts:29:13)
      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:108:22)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\adminController.test.ts:142:66)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      43 |     res.status(200).json(stats);
      44 |   } catch (error) {
    > 45 |     console.error(error);
         |             ^
      46 |     res.status(500).json({ error: 'Internal server error' });
      47 |   }
      48 | };

      at Object.error [as getSystemStats] (controllers/adminController.ts:45:13)
      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:144:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\adminController.test.ts:207:65)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      59 |     res.status(200).json(logs);
      60 |   } catch (error) {
    > 61 |     console.error(error);
         |             ^
      62 |     res.status(500).json({ error: 'Internal server error' });
      63 |   }
      64 | };

      at Object.error [as getSystemLogs] (controllers/adminController.ts:61:13)
      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:209:7)

  console.error
    Error fetching permissions: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\adminController.test.ts:240:69)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      74 |     res.status(200).json(permissions);
      75 |   } catch (error) {
    > 76 |     console.error('Error fetching permissions:', error);
         |             ^
      77 |     res.status(500).json({ error: 'Failed to fetch permissions' });
      78 |   }
      79 | };

      at Object.error [as getAllPermissions] (controllers/adminController.ts:76:13)
      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:242:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\taskController.test.ts:124:59)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      20 |     res.status(200).json(tasks);
      21 |   } catch (error) {
    > 22 |     console.error(error);
         |             ^
      23 |     res.status(500).json({ error: 'Internal server error' });
      24 |   }
      25 | }

      at Object.error [as getTasks] (controllers/taskController.ts:22:13)
      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:126:7)

FAIL src/controllers/__tests__/adminController.test.ts (9.176 s)
  AdminController
    checkAdminAccess
      ΓêÜ should return true when user is admin (52 ms)
      ├ù should return 401 when user is not authenticated (7 ms)
      ├ù should return 403 when user is not admin (3 ms)
      ΓêÜ should handle errors appropriately (214 ms)
    getSystemStats
      ΓêÜ should return system stats successfully (3 ms)
      ΓêÜ should handle errors appropriately (6 ms)
    getSystemLogs
      ├ù should return system logs successfully (6 ms)
      ├ù should handle empty query parameters (3 ms)
      ΓêÜ should handle errors appropriately (6 ms)
    getAllPermissions
      ΓêÜ should return all permissions successfully (1 ms)
      ΓêÜ should handle errors appropriately (7 ms)

  ΓùÅ AdminController ΓÇ║ checkAdminAccess ΓÇ║ should return 401 when user is not authenticated

    expect(received).toEqual(expected) // deep equality

    Expected: Any<Object>
    Received: undefined

      86 |       expect(mockRes.status).toHaveBeenCalledWith(401);
      87 |       expect(mockRes.json).toHaveBeenCalledWith({ error: 'User not authenticated' });
    > 88 |       expect(result).toEqual(expect.any(Object));
         |                      ^
      89 |     });
      90 |
      91 |     it('should return 403 when user is not admin', async () => {

      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:88:22)

  ΓùÅ AdminController ΓÇ║ checkAdminAccess ΓÇ║ should return 403 when user is not admin

    expect(received).toEqual(expected) // deep equality

    Expected: Any<Object>
    Received: undefined

      100 |       expect(mockRes.status).toHaveBeenCalledWith(403);
      101 |       expect(mockRes.json).toHaveBeenCalledWith({ error: 'Access denied' });
    > 102 |       expect(result).toEqual(expect.any(Object));
          |                      ^
      103 |     });
      104 |
      105 |     it('should handle errors appropriately', async () => {

      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:102:22)

  ΓùÅ AdminController ΓÇ║ getSystemLogs ΓÇ║ should return system logs successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"activity_name": "login", "activity_type_id": 1, "created_on": 2026-01-18T23:20:25.700Z, "description": "User logged in", "id": 1, "user_id": 1, "user_login": "test"}]
    Received: undefined

    Number of calls: 1

      178 |
      179 |       expect(mockRes.status).toHaveBeenCalledWith(200);
    > 180 |       expect(mockRes.json).toHaveBeenCalledWith(mockLogs);
          |                            ^
      181 |       expect(adminModel.getSystemLogs).toHaveBeenCalledWith(
      182 |         mockPool,
      183 |         mockQuery.startDate,

      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:180:28)

  ΓùÅ AdminController ΓÇ║ getSystemLogs ΓÇ║ should handle empty query parameters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: [{"activity_name": "login", "activity_type_id": 1, "created_on": 2026-01-18T23:20:25.700Z, "description": "User logged in", "id": 1, "user_id": 1, "user_login": "test"}]
    Received: undefined

    Number of calls: 1

      195 |
      196 |       expect(mockRes.status).toHaveBeenCalledWith(200);
    > 197 |       expect(mockRes.json).toHaveBeenCalledWith(mockLogs);
          |                            ^
      198 |       expect(adminModel.getSystemLogs).toHaveBeenCalledWith(
      199 |         mockPool,
      200 |         undefined,

      at Object.<anonymous> (controllers/__tests__/adminController.test.ts:197:28)

  console.log
    Created task: {
      task_id: '1',
      name: 'Test Task',
      description: 'Test Description',
      start_date: 2026-01-18T23:20:25.761Z,
      due_date: 2026-01-18T23:20:25.761Z,
      priority_id: 1,
      status_id: 1,
      type_id: 1,
      project_id: 1,
      holder_id: 1,
      assignee_id: 2,
      created_by: 1,
      estimated_time: 2,
      tags: [
        {
          id: 1,
          name: 'Test Tag',
          color: '#000000',
          active: true,
          created_on: 2026-01-18T23:20:25.761Z,
          updated_on: 2026-01-18T23:20:25.761Z
        }
      ]
    }

      at Object.log [as createTask] (controllers/taskController.ts:153:13)

  console.log
    Converted IDs: { taskId: 1, actionUserId: 1, originalId: '1', originalCreatedBy: 1 }

      at Object.log [as createTask] (controllers/taskController.ts:164:13)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\taskController.test.ts:467:61)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      266 |     res.status(200).json(task);
      267 |   } catch (error) {
    > 268 |     console.error(error);
          |             ^
      269 |     res.status(500).json({ error: 'Internal server error' });
      270 |   }
      271 | }

      at Object.error [as deleteTask] (controllers/taskController.ts:268:13)
      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:469:7)

  console.log
    Login attempt started

      at Object.log [as login] (controllers/loginController.ts:12:11)

  console.log
    Authenticating user: testuser

      at Object.log [as login] (controllers/loginController.ts:16:13)

  console.log
    User authenticated successfully: testuser

      at Object.log [as login] (controllers/loginController.ts:31:13)

  console.log
    Login logged to app_logins for user: testuser

      at Object.log [as login] (controllers/loginController.ts:42:13)

  console.log
    Login attempt started

      at Object.log [as login] (controllers/loginController.ts:12:11)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\commentController.test.ts:90:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      18 |     res.status(200).json(comments);
      19 |   } catch (error) {
    > 20 |     console.error(error);
         |             ^
      21 |     res.status(500).json({ error: 'Internal server error' });
      22 |   }
      23 | };

      at error (controllers/commentController.ts:20:13)
      at Object.<anonymous> (controllers/__tests__/commentController.test.ts:93:7)

  console.log
    Authenticating user: testuser

      at Object.log [as login] (controllers/loginController.ts:16:13)

  console.error
    Invalid username or password for user: testuser

      23 |
      24 |     if (!user) {
    > 25 |       console.error('Invalid username or password for user:', login);
         |               ^
      26 |       return res.status(401).json({
      27 |         error: 'Invalid username or password'
      28 |       });

      at Object.error (controllers/loginController.ts:25:15)
      at Object.<anonymous> (controllers/__tests__/loginController.test.ts:95:7)

  console.log
    Login attempt started

      at Object.log [as login] (controllers/loginController.ts:12:11)

  console.log
    Authenticating user: testuser

      at Object.log [as login] (controllers/loginController.ts:16:13)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\commentController.test.ts:215:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      54 |     res.status(201).json(newComment);
      55 |   } catch (error) {
    > 56 |     console.error(error);
         |             ^
      57 |     res.status(500).json({ error: 'Internal server error' });
      58 |   }
      59 | };

      at error (controllers/commentController.ts:56:13)
      at Object.<anonymous> (controllers/__tests__/commentController.test.ts:218:7)

FAIL src/controllers/__tests__/taskController.test.ts (9.335 s)
  TaskController
    getTasks
      ΓêÜ should return all tasks when no project_id is provided (29 ms)
      ΓêÜ should return project tasks when project_id is provided (3 ms)
      ΓêÜ should handle errors appropriately (276 ms)
    getTaskById
      ΓêÜ should return a task when it exists (4 ms)
      ΓêÜ should return 404 when task does not exist (2 ms)
    getTaskByAssignee
      ├ù should return tasks for a given assignee (24 ms)
      ΓêÜ should return 404 when no tasks are found (2 ms)
    getTaskByHolder
      ├ù should return tasks for a given holder (4 ms)
      ΓêÜ should return 404 when no tasks are found (3 ms)
    createTask
      ΓêÜ should create a task successfully (14 ms)
      ΓêÜ should return 400 when required fields are missing (13 ms)
    updateTask
      ΓêÜ should update a task successfully (2 ms)
      ΓêÜ should return 404 when task is not found (2 ms)
    changeTaskStatus
      ├ù should change task status successfully (2 ms)
      ├ù should return 404 when task is not found (3 ms)
    deleteTask
      ΓêÜ should delete a task successfully (2 ms)
      ΓêÜ should handle errors appropriately (6 ms)
    getTaskStatuses
      ΓêÜ should return all task statuses (3 ms)
    getPriorities
      ΓêÜ should return all priorities (13 ms)
    getActiveTasks
      ΓêÜ should return active tasks for a user (2 ms)
    getSubtasks
      ΓêÜ should return subtasks for a task (2 ms)
      ΓêÜ should handle case when no subtasks exist (2 ms)

  ΓùÅ TaskController ΓÇ║ getTaskByAssignee ΓÇ║ should return tasks for a given assignee

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {},
      Object {
    -   "assignee_id": "123",
    +   "assignee_id": 123,
      },

    Number of calls: 1

      212 |       );
      213 |
    > 214 |       expect(taskModel.getTasks).toHaveBeenCalledWith(mockPool, { assignee_id: assigneeId });
          |                                  ^
      215 |       expect(mockRes.status).toHaveBeenCalledWith(200);
      216 |       expect(mockRes.json).toHaveBeenCalledWith(mockTasks);
      217 |     });

      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:214:34)

  ΓùÅ TaskController ΓÇ║ getTaskByHolder ΓÇ║ should return tasks for a given holder

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {},
      Object {
    -   "holder_id": "123",
    +   "holder_id": 123,
      },

    Number of calls: 1

      260 |       );
      261 |
    > 262 |       expect(taskModel.getTasks).toHaveBeenCalledWith(mockPool, { holder_id: holderId });
          |                                  ^
      263 |       expect(mockRes.status).toHaveBeenCalledWith(200);
      264 |       expect(mockRes.json).toHaveBeenCalledWith(mockTasks);
      265 |     });

      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:262:34)

  ΓùÅ TaskController ΓÇ║ changeTaskStatus ΓÇ║ should change task status successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}, "123", {"status_id": "2"}

    Number of calls: 0

      425 |       );
      426 |
    > 427 |       expect(taskModel.updateTask).toHaveBeenCalledWith(mockPool, taskId, { status_id: newStatusId });
          |                                    ^
      428 |       expect(mockRes.status).toHaveBeenCalledWith(200);
      429 |       expect(mockRes.json).toHaveBeenCalledWith(updatedTask);
      430 |     });

      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:427:36)

  ΓùÅ TaskController ΓÇ║ changeTaskStatus ΓÇ║ should return 404 when task is not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "error": "Task not found",
    +   "error": "Unable to update task status",
      },

    Number of calls: 1

      442 |
      443 |       expect(mockRes.status).toHaveBeenCalledWith(404);
    > 444 |       expect(mockRes.json).toHaveBeenCalledWith({ error: 'Task not found' });
          |                            ^
      445 |     });
      446 |   });
      447 |

      at Object.<anonymous> (controllers/__tests__/taskController.test.ts:444:28)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\commentController.test.ts:269:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      72 |     res.status(200).json(editedComment);
      73 |   } catch (error) {
    > 74 |     console.error(error);
         |             ^
      75 |     res.status(500).json({ error: 'Internal server error' });
      76 |   }
      77 | };

      at error (controllers/commentController.ts:74:13)
      at Object.<anonymous> (controllers/__tests__/commentController.test.ts:272:7)

  console.error
    Login error: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\loginController.test.ts:110:57)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      48 |     });
      49 |   } catch (error) {
    > 50 |     console.error('Login error:', error);
         |             ^
      51 |     res.status(500).json({
      52 |       error: 'Internal server error'
      53 |     });

      at Object.error (controllers/loginController.ts:50:13)
      at Object.<anonymous> (controllers/__tests__/loginController.test.ts:112:7)

  console.error
    Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\commentController.test.ts:317:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      89 |     res.status(200).json(deletedComment);
      90 |   } catch (error) {
    > 91 |     console.error(error);
         |             ^
      92 |     res.status(500).json({ error: 'Internal server error' });
      93 |   }
      94 | };

      at error (controllers/commentController.ts:91:13)
      at Object.<anonymous> (controllers/__tests__/commentController.test.ts:320:7)

PASS src/controllers/__tests__/loginController.test.ts
  LoginController
    login
      ΓêÜ should login successfully with valid credentials (32 ms)
      ΓêÜ should return 401 for invalid credentials (11 ms)
      ΓêÜ should return 500 on internal server error (25 ms)
    logout
      ΓêÜ should logout successfully (2 ms)
      ΓêÜ should return 500 on session destroy error (2 ms)

PASS src/controllers/__tests__/commentController.test.ts
  Comment Controller
    getTaskComments
      ΓêÜ should return comments successfully (6 ms)
      ΓêÜ should handle errors (53 ms)
    createComment
      ΓêÜ should create comment successfully (5 ms)
      ΓêÜ should return 401 when user is not authenticated (1 ms)
      ΓêÜ should handle errors (5 ms)
    editComment
      ΓêÜ should edit comment successfully (4 ms)
      ΓêÜ should handle errors (5 ms)
    deleteComment
      ΓêÜ should delete comment successfully (1 ms)
      ΓêÜ should handle errors (15 ms)

  console.error
    Error in getTaskFiles: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\fileController.test.ts:100:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      19 |     res.status(200).json(files);
      20 |   } catch (error) {
    > 21 |     console.error('Error in getTaskFiles:', error);
         |             ^
      22 |     res.status(500).json({ error: 'Internal server error' });
      23 |   }
      24 | };

      at error (controllers/fileController.ts:21:13)
      at Object.<anonymous> (controllers/__tests__/fileController.test.ts:103:7)

  console.error
    Error in uploadFile: Error: Upload error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\fileController.test.ts:185:21)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      63 |     res.status(201).json(fileData);
      64 |   } catch (error) {
    > 65 |     console.error('Error in uploadFile:', error);
         |             ^
      66 |     res.status(500).json({ error: 'Internal server error' });
      67 |   }
      68 | };

      at error (controllers/fileController.ts:65:13)
      at Object.<anonymous> (controllers/__tests__/fileController.test.ts:188:7)

  console.error
    Error in downloadFile: Error: Download error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\fileController.test.ts:246:62)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

       95 |     }
       96 |   } catch (error) {
    >  97 |     console.error('Error in downloadFile:', error);
          |             ^
       98 |     res.status(500).json({ error: 'Internal server error' });
       99 |   }
      100 | };

      at error (controllers/fileController.ts:97:13)
      at Object.<anonymous> (controllers/__tests__/fileController.test.ts:248:7)

  console.error
    Error in deleteFile: Error: Database error
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\fileController.test.ts:303:61)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      126 |     res.status(200).json({ message: 'File deleted successfully' });
      127 |   } catch (error) {
    > 128 |     console.error('Error in deleteFile:', error);
          |             ^
      129 |     res.status(500).json({ error: 'Internal server error' });
      130 |   }
      131 | };

      at error (controllers/fileController.ts:128:13)
      at Object.<anonymous> (controllers/__tests__/fileController.test.ts:305:7)

  console.error
    Error deleting file from disk: Error: File not found
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\fileController.test.ts:314:50)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      120 |       await fs.unlink(filePath);
      121 |     } catch (error) {
    > 122 |       console.error('Error deleting file from disk:', error);
          |               ^
      123 |       // Continue even if file doesn't exist on disk
      124 |     }
      125 |

      at error (controllers/fileController.ts:122:15)
      at Object.<anonymous> (controllers/__tests__/fileController.test.ts:316:7)

PASS src/controllers/__tests__/fileController.test.ts
  fileController
    getTaskFiles
      ΓêÜ should return files successfully (3 ms)
      ΓêÜ should handle errors (30 ms)
    uploadFile
      ΓêÜ should upload file successfully (2 ms)
      ΓêÜ should handle unauthorized user (1 ms)
      ΓêÜ should handle missing file (1 ms)
      ΓêÜ should handle invalid task ID (2 ms)
      ΓêÜ should handle upload errors (4 ms)
    downloadFile
      ΓêÜ should download file successfully (1 ms)
      ΓêÜ should handle file not found in database (2 ms)
      ΓêÜ should handle file not found on disk (2 ms)
      ΓêÜ should handle download errors (4 ms)
    deleteFile
      ΓêÜ should delete file successfully (2 ms)
      ΓêÜ should handle file not found (1 ms)
      ΓêÜ should handle database deletion error (4 ms)
      ΓêÜ should succeed even if file does not exist on disk (5 ms)

  console.error
    Error: Session error
        at Object.get [as user] (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\sessionController.test.ts:90:28)
        at Object.user [as session] (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\sessionController.ts:11:21)
        at Object.<anonymous> (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\src\controllers\__tests__\sessionController.test.ts:94:31)
        at Promise.then.completed (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:316:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at _runTestsForDescribeBlock (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:121:9)
        at run (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (C:\Users\Mihovil\Desktop\CS50\project_management_app\api\node_modules\jest-runner\build\testWorker.js:106:12)

      15 |     }
      16 |   } catch (error) {
    > 17 |     console.error(error);
         |             ^
      18 |     res.status(500).json({
      19 |       error: 'Internal server error'
      20 |     });

      at Object.error [as session] (controllers/sessionController.ts:17:13)
      at Object.<anonymous> (controllers/__tests__/sessionController.test.ts:94:31)

PASS src/controllers/__tests__/sessionController.test.ts (9.759 s)
  SessionController
    session
      ΓêÜ should return user data when session exists (19 ms)
      ΓêÜ should return 401 when no session exists (2 ms)
      ΓêÜ should return 500 on internal error (102 ms)

FAIL src/__tests__/integration/auth/auth-flow.test.ts (10.348 s)
  Authentication Flow
    POST /api/auth/register
      ├ù should register a new user successfully (106 ms)
    POST /api/auth/login
      ├ù should login successfully with correct credentials (67 ms)

  ΓùÅ Authentication Flow ΓÇ║ POST /api/auth/register ΓÇ║ should register a new user successfully

    listen EADDRINUSE: address already in use :::5000

      86 |
      87 | // Start server
    > 88 | app.listen(config.port, () => {
         |     ^
      89 |   console.log(`Server is running on port ${config.port}`);
      90 | });
      91 |

      at Function.listen (../node_modules/express/lib/application.js:635:24)
      at Object.listen (app.ts:88:5)
      at Object.<anonymous> (__tests__/integration/auth/auth-flow.test.ts:2:1)

  ΓùÅ Authentication Flow ΓÇ║ POST /api/auth/register ΓÇ║ should register a new user successfully

    SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string

      22 |
      23 | export const clearTestData = async () => {
    > 24 |   await testPool.query('TRUNCATE users CASCADE');
         |   ^
      25 |   // Add more tables to clear as needed
      26 | };
      27 |

      at ../node_modules/pg-pool/index.js:45:11
      at clearTestData (__tests__/utils/test-helpers.ts:24:3)
      at Object.<anonymous> (__tests__/integration/auth/auth-flow.test.ts:7:5)

  ΓùÅ Authentication Flow ΓÇ║ POST /api/auth/login ΓÇ║ should login successfully with correct credentials

    SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string

      22 |
      23 | export const clearTestData = async () => {
    > 24 |   await testPool.query('TRUNCATE users CASCADE');
         |   ^
      25 |   // Add more tables to clear as needed
      26 | };
      27 |

      at ../node_modules/pg-pool/index.js:45:11
      at clearTestData (__tests__/utils/test-helpers.ts:24:3)
      at Object.<anonymous> (__tests__/integration/auth/auth-flow.test.ts:7:5)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
----------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------
File                        | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                     
----------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------
All files                   |   53.16 |    21.92 |   19.27 |   47.91 |                                                                                                       
 src                        |    90.9 |     62.5 |       0 |    90.9 |                                                                                                       
  app.ts                    |   90.19 |        0 |       0 |   90.19 | 52,60-63,89                                                                                           
  config.ts                 |     100 |    83.33 |     100 |     100 | 12                                                                                                    
 src/__tests__/utils        |    64.7 |      100 |      25 |   53.84 |                                                                                                       
  test-helpers.ts           |    64.7 |      100 |      25 |   53.84 | 6-10,14-20,29-33                                                                                      
 src/controllers            |   52.27 |    35.46 |   45.26 |   47.42 |                                                                                                       
  activityTypeController.ts |   75.51 |       65 |      80 |   72.72 | 48-58,92-93,108,123-133                                                                               
  adminController.ts        |     100 |      100 |     100 |     100 |                                                                                                       
  commentController.ts      |     100 |       60 |     100 |     100 | 17,42                                                                                                 
  fileController.ts         |   96.66 |       90 |     100 |   96.42 | 93-94                                                                                                 
  loginController.ts        |     100 |      100 |     100 |     100 |                                                                                                       
  notificationController.ts |     100 |      100 |     100 |     100 |                                                                                                       
  profileController.ts      |   77.58 |    42.85 |     100 |   75.47 | 55-56,73,88-100,116,124-125,141                                                                       
  projectController.ts      |   19.72 |        0 |       0 |   12.21 | 19-29,39-49,59-69,85-108,118-129,139-153,163-173,183-189,199-216,226-237,247-253,263-276,286-291      
  roleController.ts         |   18.42 |        0 |       0 |   11.42 | 12-17,26-45,56-85                                                                                     
  sessionController.ts      |     100 |      100 |     100 |     100 |                                                                                                       
  settingsController.ts     |   25.71 |        0 |       0 |   16.12 | 13-18,28-33,43-52,62-71                                                                               
  tagController.ts          |   23.43 |        0 |       0 |   14.03 | 13-18,28-40,50-63,73-79,89-95,105-112,122-128                                                         
  taskController.ts         |   79.19 |       64 |     100 |    77.2 | 42-43,62-63,82-83,156,167,170,182-185,216-217,240-249,263-264,283-284,298-299,312-313,318-319,334-335 
  taskTypeController.ts     |   21.56 |        0 |       0 |   13.04 | 12-17,27-38,48-79,89-110,120-131                                                                      
  timeLogController.ts      |   22.89 |        0 |       0 |   13.51 | 13-18,28-34,44-50,60-67,77-83,93-120,130-148,158-164,174-186                                          
  userController.ts         |   22.85 |        0 |       0 |   14.28 | 13-21,31-40,57-71,81-91,101-111,121-130,140-150                                                       
  watcherController.ts      |   24.13 |        0 |       0 |   15.38 | 11-17,27-34,44-54                                                                                     
 src/middleware             |   25.64 |        0 |      25 |   25.64 |                                                                                                       
  authMiddleware.ts         |   16.66 |        0 |       0 |   16.66 | 10-15                                                                                                 
  errorHandler.ts           |    9.09 |        0 |       0 |    9.09 | 10-34                                                                                                 
  permissionMiddleware.ts   |   18.75 |        0 |      25 |   18.75 | 9-29                                                                                                  
  sessionMiddleware.ts      |   83.33 |      100 |      50 |   83.33 | 18                                                                                                    
 src/models                 |   42.17 |        0 |       0 |   26.72 |                                                                                                       
  activityTypeModel.ts      |      50 |        0 |       0 |   33.33 | 6-11,22-29,41-48,53-60                                                                                
  adminModel.ts             |   36.36 |        0 |       0 |   22.22 | 9-13,18-19,29-49,54-60                                                                                
  commentModel.ts           |      50 |        0 |       0 |   33.33 | 9-15,25-31,39-45,54-60,68-74                                                                          
  fileModel.ts              |   53.33 |        0 |       0 |   36.36 | 9-13,27-40,48-53,61                                                                                   
  loginModel.ts             |   57.14 |        0 |       0 |      40 | 10-14,22                                                                                              
  notificationModel.ts      |   52.63 |      100 |       0 |   35.71 | 9-15,23-31,39,52-56,64-68                                                                             
  permissionModel.ts        |      50 |      100 |       0 |   33.33 | 9-13,22-27                                                                                            
  profileModel.ts           |      48 |        0 |       0 |   31.57 | 11-17,26-36,45-49,58-66,74-78,86-90                                                                   
  projectModel.ts           |   37.14 |        0 |       0 |    22.8 | 15-31,39-44,52-56,69-76,85-89,98-109,117-121,129-134,142-147,156-163,172-178,187-198,205-209          
  roleModel.ts              |   31.57 |      100 |       0 |   18.75 | 6-9,15-24,31-39                                                                                       
  settingsModel.ts          |   44.44 |        0 |       0 |   28.57 | 10-13,28-37,45-49,63-73                                                                               
  tagModel.ts               |   53.84 |        0 |       0 |   36.84 | 6-11,21-27,36,48,60-68,78-85,90-97                                                                    
  taskModel.ts              |   34.37 |        0 |       0 |   20.75 | 17-34,42-47,71-99,108-145,154-161,169-176,183-187,194-198,206-212,220-226,234-240                     
  taskTypeModel.ts          |      50 |        0 |       0 |   33.33 | 6-11,19-24,36-43,56-63,68-75                                                                          
  timeLogModel.ts           |   48.64 |      100 |       0 |   32.14 | 12-16,31-39,53-61,69,81-87,96-102,110-115,125-131,139-144                                             
  userModel.ts              |    27.9 |        0 |       0 |   16.21 | 13-29,37-40,53-60,69-89,98-105,113-120                                                                
  watcherModel.ts           |      50 |        0 |       0 |   33.33 | 9-14,23-29,38-44                                                                                      
 src/routes                 |   66.03 |        0 |   14.28 |   66.03 |                                                                                                       
  activityTypeRouter.ts     |   68.75 |      100 |   16.66 |   68.75 | 11,15,19,23,27                                                                                        
  adminRouter.ts            |   76.92 |      100 |      25 |   76.92 | 12,17,22                                                                                              
  commentRouter.ts          |   69.23 |      100 |      20 |   69.23 | 11,15,19,23                                                                                           
  fileRouter.ts             |   63.33 |        0 |    12.5 |   63.33 | 13,19-23,35-38,43,48,52,56                                                                            
  loginRouter.ts            |   85.71 |      100 |      50 |   85.71 | 11                                                                                                    
  logoutRouter.ts           |   85.71 |      100 |      50 |   85.71 | 9                                                                                                     
  notificationRouter.ts     |   72.72 |      100 |      25 |   72.72 | 11,15,19                                                                                              
  profileRouter.ts          |   66.66 |      100 |   16.66 |   66.66 | 10,14,18,22,26                                                                                        
  projectRouter.ts          |   59.45 |      100 |    6.25 |   59.45 | 14,18,22,26,32,39,46,53,59,63,69,76,81,85,89                                                          
  roleRouter.ts             |      75 |      100 |      25 |      75 | 12,16,20                                                                                              
  sessionRouter.ts          |   85.71 |      100 |      50 |   85.71 | 10                                                                                                    
  settingsRouter.ts         |   71.42 |      100 |      20 |   71.42 | 11,16,20,24                                                                                           
  tagRouter.ts              |   69.23 |      100 |      20 |   69.23 | 11,15,19,23                                                                                           
  taskRouter.ts             |   57.37 |      100 |       4 |   57.37 | 20,23,26,29,32,35,39,42,45,48,51,55-56,61-62,67,71,75,78,81,85,88,91,94,97,100                        
  taskTypeRouter.ts         |   68.75 |      100 |   16.66 |   68.75 | 11,15,19,23,27                                                                                        
  timeLogRouter.ts          |    62.5 |      100 |      10 |    62.5 | 11,15,19,23,27,31,35,41,47                                                                            
  userRouter.ts             |   63.63 |      100 |   11.11 |   63.63 | 12,16,20,24,28,32,36,40                                                                               
 src/types                  |     100 |      100 |     100 |     100 |                                                                                                       
  notification.ts           |     100 |      100 |     100 |     100 |                                                                                                       
----------------------------|---------|----------|---------|---------|-------------------------------------------------------------------------------------------------------
Test Suites: 5 failed, 5 passed, 10 total
Tests:       23 failed, 76 passed, 99 total
Snapshots:   0 total
Time:        12.429 s
Ran all test suites.
